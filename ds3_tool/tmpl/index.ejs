<!-- ルートコンテナ -->
<script type="text/ejs" id="root-container">
    <!-- タブ -->
    <ul class="nav nav-tabs root-tabs">
        <li class="active">
            <a data-toggle="tab" href="#sujou-and-status">素性とステータス</a>
        </li>
        <li>
            <a data-toggle="tab" href="#seimeiryoku-and-hp">生命力とHP</a>
        </li>
        <li>
            <a data-toggle="tab" href="#syutyuryoku-and-fp">集中力とFP</a>
        </li>
        <li>
            <a data-toggle="tab" href="#syutyuryoku-and-slot">集中力と記憶スロット</a>
        </li>
        <li>
            <a data-toggle="tab" href="#jikyuryoku-and-stamina">持久力とスタミナ</a>
        </li>
        <li>
            <a data-toggle="tab" href="#tairyoku-and-weight">体力と装備重量</a>
        </li>
        <li>
            <a data-toggle="tab" href="#build-and-weight">ビルドと装備重量</a>
        </li>
    </ul>

    <!-- タブコンテンツ -->
    <div class="tab-content root-tab-contents">
        <!-- 素性とステータス -->
        <div id="sujou-and-status" class="tab-pane active"></div>

        <!-- 生命力とHP -->
        <div id="seimeiryoku-and-hp" class="tab-pane"></div>
        
        <!-- 集中力とFP -->
        <div id="syutyuryoku-and-fp" class="tab-pane"></div>

        <!-- 集中力と記憶スロット -->
        <div id="syutyuryoku-and-slot" class="tab-pane"></div>

        <!-- 持久力とスタミナ -->
        <div id="jikyuryoku-and-stamina" class="tab-pane"></div>

        <!-- 体力と装備重量 -->
        <div id="tairyoku-and-weight" class="tab-pane"></div>

        <!-- ビルドと装備重量 -->
        <div id="build-and-weight" class="tab-pane"></div>
    </div>
</script>

<script type="text/ejs" id="sujou-and-status">
    <!-- 素性と初期値の表 -->
    <div class="sujou-and-syokiti-container">
        <div class="container-header">
            <span>素性と初期値の表</span>
        </div>
        <div class="container-body">
            <table class="sujo-and-syokiti-table" border=1>
                <thead>
                    <tr>
                        <td></td>
                        <td width="50px" class="col-name-cell">レベル</td>
                        <td width="50px" class="col-name-cell">生命力</td>
                        <td width="50px" class="col-name-cell">集中力</td>
                        <td width="50px" class="col-name-cell">持久力</td>
                        <td width="50px" class="col-name-cell">体力</td>
                        <td width="50px" class="col-name-cell">筋力</td>
                        <td width="50px" class="col-name-cell">技量</td>
                        <td width="50px" class="col-name-cell">理力</td>
                        <td width="50px" class="col-name-cell">信仰</td>
                        <td width="50px" class="col-name-cell">運</td>
                    </tr>
                </thead>
                <tbody data-h5-loop-context="syokitiList">
                    <tr>
                        <td class="sujo-name-cell" data-h5-bind="sujo"></td>
                        <td class="status-value-cell" data-h5-bind="level"></td>
                        <td class="status-value-cell" data-h5-bind="seimeiryoku"></td>
                        <td class="status-value-cell" data-h5-bind="syutyuryoku"></td>
                        <td class="status-value-cell" data-h5-bind="jikyuryoku"></td>
                        <td class="status-value-cell" data-h5-bind="tairyoku"></td>
                        <td class="status-value-cell" data-h5-bind="kinryoku"></td>
                        <td class="status-value-cell" data-h5-bind="giryo"></td>
                        <td class="status-value-cell" data-h5-bind="riryoku"></td>
                        <td class="status-value-cell" data-h5-bind="sinkou"></td>
                        <td class="status-value-cell" data-h5-bind="un"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- 目標値の表 -->
    <div class="mokuhyoti-table-container">
        <div class="container-header">
            <span>目標値</span>
        </div>
        <div class="container-body">
            <table class="mokuhyoti-table" border=1>
                <tr>
                    <td width="55px" class="col-name-cell">生命力</td>
                    <td width="55px" class="col-name-cell">集中力</td>
                    <td width="55px" class="col-name-cell">持久力</td>
                    <td width="55px" class="col-name-cell">体力</td>
                    <td width="55px" class="col-name-cell">筋力</td>
                    <td width="55px" class="col-name-cell">技量</td>
                    <td width="55px" class="col-name-cell">理力</td>
                    <td width="55px" class="col-name-cell">信仰</td>
                    <td width="55px" class="col-name-cell">運</td>
                </tr>
                <tr data-h5-context="mokuhyoti">
                    <td class="input-mokuhyoti-cell">
                        <input type="number" data-h5-bind="seimeiryoku" name="seimeiryoku" class="mokuhyoti-input-cell">
                    </td>
                    <td class="input-mokuhyoti-cell">
                        <input type="number" data-h5-bind="syutyuryoku" name="syutyuryoku" class="mokuhyoti-input-cell">
                    </td>
                    <td class="input-mokuhyoti-cell">
                        <input type="number" data-h5-bind="jikyuryoku" name="jikyuryoku" class="mokuhyoti-input-cell">
                    </td>
                    <td class="input-mokuhyoti-cell">
                        <input type="number" data-h5-bind="tairyoku" name="tairyoku" class="mokuhyoti-input-cell">
                    </td>
                    <td class="input-mokuhyoti-cell">
                        <input type="number" data-h5-bind="kinryoku" name="kinryoku" class="mokuhyoti-input-cell">
                    </td>
                    <td class="input-mokuhyoti-cell">
                        <input type="number" data-h5-bind="giryo" name="giryo" class="mokuhyoti-input-cell">
                    </td>
                    <td class="input-mokuhyoti-cell">
                        <input type="number" data-h5-bind="riryoku" name="riryoku" class="mokuhyoti-input-cell">
                    </td>
                    <td class="input-mokuhyoti-cell">
                        <input type="number" data-h5-bind="sinkou" name="sinkou" class="mokuhyoti-input-cell">
                    </td>
                    <td class="input-mokuhyoti-cell">
                        <input type="number" data-h5-bind="un" name="un" class="mokuhyoti-input-cell">
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <div class="sujo-and-hituyoti-container">
        <div class="container-header">
            <span>必要レベルと必要増加値 ※最適な素性の背景色が赤くなる</span>
        </div>
        <div class="container-body">
            <table class="sujo-and-hituyoti-table" border=1>
                <thead>
                    <tr>
                        <td></td>
                        <td width="50px" class="col-name-cell">レベル</td>
                        <td width="50px" class="col-name-cell">生命力</td>
                        <td width="50px" class="col-name-cell">集中力</td>
                        <td width="50px" class="col-name-cell">持久力</td>
                        <td width="50px" class="col-name-cell">体力</td>
                        <td width="50px" class="col-name-cell">筋力</td>
                        <td width="50px" class="col-name-cell">技量</td>
                        <td width="50px" class="col-name-cell">理力</td>
                        <td width="50px" class="col-name-cell">信仰</td>
                        <td width="50px" class="col-name-cell">運</td>
                    </tr>
                </thead>
                <tbody data-h5-loop-context="hituyotiList">
                    <tr>
                        <td class="sujo-name-cell" data-h5-bind="sujo"></td>
                        <td class="status-value-cell" data-h5-bind="level"></td>
                        <td class="status-value-cell" data-h5-bind="seimeiryoku"></td>
                        <td class="status-value-cell" data-h5-bind="syutyuryoku"></td>
                        <td class="status-value-cell" data-h5-bind="jikyuryoku"></td>
                        <td class="status-value-cell" data-h5-bind="tairyoku"></td>
                        <td class="status-value-cell" data-h5-bind="kinryoku"></td>
                        <td class="status-value-cell" data-h5-bind="giryo"></td>
                        <td class="status-value-cell" data-h5-bind="riryoku"></td>
                        <td class="status-value-cell" data-h5-bind="sinkou"></td>
                        <td class="status-value-cell" data-h5-bind="un"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</script>

<script type="text/ejs" id="seimeiryoku-and-hp">
    <div class="seimeiryoku-and-hp-container">
        <div class="container-header">
            <span>生命力とHP</span>
        </div>
        <div class="container-body">
            <table border=1 class="seimeiryoku-and-hp-table">
                <thead>
                    <tr>
                        <td width=46 class="col-name-cell">生命力</td>
                        <td width=56 class="col-name-cell">HP</td>
                        <td width=56 class="col-name-cell">上昇量</td>
                        <td width=46 style="border-left: solid 2px;" class="col-name-cell">生命力</td>
                        <td width=56 class="col-name-cell">HP</td>
                        <td width=56 class="col-name-cell">上昇量</td>
                        <td width=46 style="border-left: solid 2px;" class="col-name-cell">生命力</td>
                        <td width=56 class="col-name-cell">HP</td>
                        <td width=56 class="col-name-cell">上昇量</td>
                        <td width=46 style="border-left: solid 2px;" class="col-name-cell">生命力</td>
                        <td width=56 class="col-name-cell">HP</td>
                        <td width=56 class="col-name-cell">上昇量</td>
                    </tr>
                </thead>
                <tbody>
                    [% for (var i = 0,len = seimeiryokuAndHPList.length; i < len; i++) { %]
                        [% var data = seimeiryokuAndHPList[i]; %]
                        <tr>
                            <td class="status-value-cell">[%= data.seimeiryokuC1 %]</td>
                            <td class="status-value-cell">[%= data.hpC1 %]</td>
                            <td class="status-value-cell">[%= data.increaseC1 %]</td>
                            
                            <td style="border-left: solid 2px;" class="status-value-cell">[%= data.seimeiryokuC2 %]</td>
                            <td class="status-value-cell">[%= data.hpC2 %]</td>
                            <td class="status-value-cell">[%= data.increaseC2 %]</td>

                            <td style="border-left: solid 2px;" class="status-value-cell">[%= data.seimeiryokuC3 %]</td>
                            <td class="status-value-cell">[%= data.hpC3 %]</td>
                            <td class="status-value-cell">[%= data.increaseC3 %]</td>

                            <td style="border-left: solid 2px;" class="status-value-cell">[%= data.seimeiryokuC4 %]</td>
                            <td class="status-value-cell">[%= data.hpC4 %]</td>
                            <td class="status-value-cell">[%= data.increaseC4 %]</td>
                        </tr>
                    [% } %]
                </tbody>
            </table>
        </div>
    </div>
</script>

<script type="text/ejs" id="jikyuryoku-and-stamina">
    <div class="jikyuryoku-and-stamina-container">
        <div class="container-header">
            <ul>
                <li>「寵愛n」は「寵愛の指輪+n」を装備した値を指す</li>
                <li>虜囚の鎖は持久力+5</li>
            </ul>
        </div>
        <div class="container-body">
            <table border=1 class="jikyuryoku-and-stamina-table">
                <thead>
                    <tr>
                        <td width=46 class="col-name-cell">持久力</td>
                        <td width=56 class="col-name-cell">スタミナ</td>
                        <td width=56 class="col-name-cell">寵愛0</td>
                        <td width=56 class="col-name-cell">寵愛1</td>
                        <td width=56 class="col-name-cell">寵愛2</td>
                        <td width=56 class="col-name-cell">寵愛3</td>
                </thead>
                <tbody>
                    [%
                        var getBGColor = function(val) {
                            val = parseFloat(val);
                            if (val < 100) {
                                return '#caf8ff';
                            }
                            if (val < 110) {
                                return '#caffca';
                            }
                            if (val < 120) {
                                return '#ffdede';
                            }
                            if (val < 130) {
                                return '#ffd588';
                            }
                            return '#f0c5ff';
                        }
                    %]
                    [% for (var i = 0,len = jikyuryokuList.length; i < len; i++) { %]
                        [% var data = jikyuryokuList[i]; %]
                        <tr>
                            <td class="status-value-cell">[%= data.jikyuryoku %]</td>
                            <td style="background-color:[%= getBGColor(data.stamina) %]" class="status-value-cell">[%= data.stamina %]</td>
                            <td style="background-color:[%= getBGColor(data.tyouai0) %]" class="status-value-cell">[%= data.tyouai0 %]</td>
                            <td style="background-color:[%= getBGColor(data.tyouai1) %]" class="status-value-cell">[%= data.tyouai1 %]</td>
                            <td style="background-color:[%= getBGColor(data.tyouai2) %]" class="status-value-cell">[%= data.tyouai2 %]</td>
                            <td style="background-color:[%= getBGColor(data.tyouai3) %]" class="status-value-cell">[%= data.tyouai3 %]</td>
                        </tr>
                    [% } %]
                </tbody>
            </table>
        </div>
    </div>
</script>

<script type="text/ejs" id="tairyoku-and-weight">
    <div class="tairyoku-and-weight-container">
        <div class="container-header">
            <ul>
                <li>「ハベルn」は「ハベルの指輪+n」を装備した値を指す</li>
                <li>「寵愛n」は「寵愛の指輪+n」を装備した値を指す</li>
            </ul>
        </div>
        <div class="container-body">
            <table border=1 class="tairyoku-and-weight-table">
                <thead>
                    <tr>
                        <td width=46 class="col-name-cell">体力</td>
                        <td width=56 class="col-name-cell">装備重量</td>
                        <td width=56 class="col-name-cell">ハベル0</td>
                        <td width=56 class="col-name-cell">ハベル1</td>
                        <td width=56 class="col-name-cell">ハベル2</td>
                        <td width=56 class="col-name-cell">ハベル3</td>
                        <td width=56 class="col-name-cell">寵愛0</td>
                        <td width=56 class="col-name-cell">寵愛1</td>
                        <td width=56 class="col-name-cell">寵愛2</td>
                        <td width=56 class="col-name-cell">寵愛3</td>
                        <td width=64 class="col-name-cell">虜囚の鎖</td>
                        <td width=86 class="col-name-cell">ハベル0寵愛0</td>
                        <td width=86 class="col-name-cell">ハベル0寵愛3</td>
                        <td width=66 class="col-name-cell">寵愛0虜囚</td>
                        <td width=66 class="col-name-cell">寵愛3虜囚</td>
                        <td width=80 class="col-name-cell">ハベル0虜囚</td>
                        <td width=80 class="col-name-cell">ハベル3虜囚</td>
                        <td width=60 class="col-name-cell">ALL</td>
                </thead>
                <tbody>
                    [%
                        var getBGColor = function(val) {
                            val = parseFloat(val);
                            if (val < 60) {
                                return '#caf8ff';
                            }
                            if (val < 70) {
                                return '#caffca';
                            }
                            if (val < 80) {
                                return '#ffdede';
                            }
                            return '#ffd588';
                        }
                    %]
                    [% for (var i = 0,len = tairyokuList.length; i < len; i++) { %]
                        [% var data = tairyokuList[i]; %]
                        <tr>
                            <!-- 体力 -->
                            <td class="status-value-cell">[%= data.tairyoku %]</td>
                            <!-- 装備重量 -->
                            <td style="background-color:[%= getBGColor(data.weight) %]" class="status-value-cell">[%= data.weight %]</td>
                            
                            <!-- ハベル0~3 -->
                            <td style="background-color:[%= getBGColor(data.haberu0) %]" class="status-value-cell">[%= data.haberu0 %]</td>
                            <td style="background-color:[%= getBGColor(data.haberu1) %]" class="status-value-cell">[%= data.haberu1 %]</td>
                            <td style="background-color:[%= getBGColor(data.haberu2) %]" class="status-value-cell">[%= data.haberu2 %]</td>
                            <td style="background-color:[%= getBGColor(data.haberu3) %]" class="status-value-cell">[%= data.haberu3 %]</td>
                            
                            <!-- 寵愛0~3 -->
                            <td style="background-color:[%= getBGColor(data.tyouai0) %]" class="status-value-cell">[%= data.tyouai0 %]</td>
                            <td style="background-color:[%= getBGColor(data.tyouai1) %]" class="status-value-cell">[%= data.tyouai1 %]</td>
                            <td style="background-color:[%= getBGColor(data.tyouai2) %]" class="status-value-cell">[%= data.tyouai2 %]</td>
                            <td style="background-color:[%= getBGColor(data.tyouai3) %]" class="status-value-cell">[%= data.tyouai3 %]</td>

                            <!-- 虜囚 -->
                            <td style="background-color:[%= getBGColor(data.ryosyu) %]" class="status-value-cell">[%= data.ryosyu %]</td>

                            <!-- ハベル0寵愛0 -->
                            <td style="background-color:[%= getBGColor(data.haberu0tyouai0) %]" class="status-value-cell">[%= data.haberu0tyouai0 %]</td>
                            <!-- ハベル3寵愛3 -->
                            <td style="background-color:[%= getBGColor(data.haberu3tyouai3) %]" class="status-value-cell">[%= data.haberu3tyouai3 %]</td>

                            <!-- 寵愛0虜囚 -->
                            <td style="background-color:[%= getBGColor(data.tyouai0ryosyu) %]" class="status-value-cell">[%= data.tyouai0ryosyu %]</td>
                            <!-- 寵愛3虜囚 -->
                            <td style="background-color:[%= getBGColor(data.tyouai3ryosyu) %]" class="status-value-cell">[%= data.tyouai3ryosyu %]</td>

                            <!-- ハベル0虜囚 -->
                            <td style="background-color:[%= getBGColor(data.haberu0ryosyu) %]" class="status-value-cell">[%= data.haberu0ryosyu %]</td>
                            <!-- ハベル3虜囚 -->
                            <td style="background-color:[%= getBGColor(data.haberu3ryosyu) %]" class="status-value-cell">[%= data.haberu3ryosyu %]</td>

                            <!-- ALL -->
                            <td style="background-color:[%= getBGColor(data.all) %]" class="status-value-cell">[%= data.all %]</td>
                        </tr>
                    [% } %]
                </tbody>
            </table>
        </div>
    </div>
</script>

<script type="text/ejs" id="syutyuryoku-and-fp">
    <div class="syutyuryoku-and-fp-container">
        <div class="container-header">
            <span>集中力とFP</span>
            <ul>
                <li>灰エストの最大回復量は200</li>
                <li>灰指輪で240</li>
            </ul>
        </div>
        <div class="container-body">
            <table border=1 class="syutyuryoku-and-fp-table">
                <thead>
                    <tr>
                        <td width=46 class="col-name-cell">集中力</td>
                        <td width=56 class="col-name-cell">FP</td>
                        <td width=56 class="col-name-cell">上昇量</td>
                    </tr>
                </thead>
                <tbody>
                    [% for (var i = 0,len = syutyuryokuAndFPList.length; i < len; i++) { %]
                        [% var data = syutyuryokuAndFPList[i]; %]
                        <tr>
                            <td class="status-value-cell">[%= data.syutyuryoku %]</td>
                            <td class="status-value-cell">[%= data.fp %]</td>
                            <td class="status-value-cell">[%= data.increase %]</td>
                        </tr>
                    [% } %]
                </tbody>
            </table>
        </div>
    </div>
</script>

<script type="text/ejs" id="syutyuryoku-and-slot">
    <div class="syutyuryoku-and-slot-container">
        <div class="container-header">
            <span>集中力と記憶スロット</span>
        </div>
        <div class="container-body">
            <table border=1 class="syutyuryoku-and-slot-table">
                <thead>
                    <tr>
                        <td width=50 class="col-name-cell">集中力</td>
                        <td width=56 class="col-name-cell">スロット</td>
                    </tr>
                </thead>
                <tbody>
                    [% for (var i = 0,len = syutyuryokuAndSlotList.length; i < len; i++) { %]
                        [% var data = syutyuryokuAndSlotList[i]; %]
                        <tr>
                            <td class="status-value-cell">[%= data.syutyuryoku %]</td>
                            <td class="status-value-cell">[%= data.slot %]</td>
                        </tr>
                    [% } %]
                </tbody>
            </table>
        </div>
    </div>
</script>

<script type="text/ejs" id="build-and-weight">
    <div class="build-and-weight-container">
        [%
            var i = 0;
            var j = 0;
            var len = 0;
            var genreLen = 0;
        %]
        <div class="container-header">
            <span>ビルドと必要装備重量</span>
        </div>
        <div class="container-body">
            <div class="armors-build-table">
                <div class="armors-build-row helm-row">
                    <div class="parts-cell">部位</div>
                    <div class="equip-cell">防具</div>
                    <div class="weight-cell">重量</div>
                    <div class="kyoujin-cell">強靭</div>
                </div>

                <div class="armors-build-row helm-row">
                    <div class="parts-cell">頭</div>
                    <div class="equip-cell">
                        <select class="armor-select" data-parts-name="helm">
                            [% for (i = 0, len = helmList.length; i < len; i++) { %]
                                <option>
                                    [%= helmList[i].name %]
                                </option>
                            [% } %]
                        </select>
                    </div>
                    <div class="weight-cell" data-h5-bind="helmW"></div>
                    <div class="kyoujin-cell" data-h5-bind="helmK"></div>
                </div>

                <div class="armors-build-row body-row">
                    <div class="parts-cell">胴</div>
                    <div class="equip-cell">
                        <select class="armor-select" data-parts-name="body">
                            [% for (i = 0, len = bodyList.length; i < len; i++) { %]
                                <option>
                                    [%= bodyList[i].name %]
                                </option>
                            [% } %]
                        </select>
                    </div>
                    <div class="weight-cell" data-h5-bind="bodyW"></div>
                    <div class="kyoujin-cell" data-h5-bind="bodyK"></div>
                </div>

                <div class="armors-build-row hand-row">
                    <div class="parts-cell">手</div>
                    <div class="equip-cell">
                        <select class="armor-select" data-parts-name="hand">
                            [% for (i = 0, len = handList.length; i < len; i++) { %]
                                <option>
                                    [%= handList[i].name %]
                                </option>
                            [% } %]
                        </select>
                    </div>
                    <div class="weight-cell" data-h5-bind="handW"></div>
                    <div class="kyoujin-cell" data-h5-bind="handK"></div>
                </div>

                <div class="armors-build-row leg-row">
                    <div class="parts-cell">足</div>
                    <div class="equip-cell">
                        <select class="armor-select" data-parts-name="leg">
                            [% for (i = 0, len = legList.length; i < len; i++) { %]
                                <option>
                                    [%= legList[i].name %]
                                </option>
                            [% } %]
                        </select>
                    </div>
                    <div class="weight-cell" data-h5-bind="legW"></div>
                    <div class="kyoujin-cell" data-h5-bind="legK"></div>
                </div>

                <div class="armors-build-row total-row">
                    <div class="parts-cell">合計</div>
                    <div class="equip-cell"></div>
                    <div class="weight-cell" data-h5-bind="totalArmorW"></div>
                    <div class="kyoujin-cell" data-h5-bind="totalArmorK"></div>
                </div>
            </div>

            <div class="weapons-build-table">
                <div class="weapons-build-row">
                    <div class="parts-cell">部位</div>
                    <div class="genre-cell">ジャンル</div>
                    <div class="equip-cell">装備</div>
                    <div class="weight-cell">重量</div>
                </div>

                [% for (i = 0, len = weaponsBuildList.length; i < len; i++) { %]
                    [% var weaponsBuild = weaponsBuildList[i]; %]
                    <div class="weapons-build-row [%= weaponsBuild.rowName %]-row">
                        <div class="parts-cell">[%= weaponsBuild.partsName %]</div>
                        <div class="genre-cell">
                            <select class="genre-select">
                                [% for (j = 0, genreLen = genreList.length; j < genreLen; j++) { %]
                                    <option>[%= genreList[j].kanaName %]</option>
                                [% } %]
                            </select>
                        </div>
                        <div class="equip-cell">
                            <select class="weapon-select" data-weapon-bind-name="[%= weaponsBuild.weightBindName %]"></select>
                        </div>
                        <div class="weight-cell" data-h5-bind="[%= weaponsBuild.weightBindName %]"></div>
                    </div>
                [% } %]
            </div>

            <div class="total-table">
                <div class="total-table-row">
                    <div class="total-table-cell">武器と防具の重量</div>
                    <div class="total-table-cell" data-h5-bind="totalW"></div>
                </div>
                <div class="total-table-row">
                    <div class="total-table-cell">必要な装備重量</div>
                    <div class="total-table-cell" data-h5-bind="requiredPossessionW"></div>
                </div>
            </div>
        </div>
    </div>
</script>
